(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e3d1a98a"],{"0274":function(t,o,e){t.exports=e.p+"img/Flag-map.835c66d2.jpg"},"1cfd":function(t,o,e){"use strict";e("e848")},e848:function(t,o,e){},eb28:function(t,o,e){"use strict";e.r(o);var s=function(){var t=this,o=t._self._c;return o("div",{staticClass:"main"},[o("section",{staticClass:"signup"},[o("div",{staticClass:"container"},[o("div",{staticClass:"signup-content row"},[o("div",{staticClass:"col-md-6 mt-5"},[o("div",{staticClass:"mt-3",staticStyle:{"text-align":"right"}},[o("form",[o("div",{staticClass:"mt-3",staticStyle:{"text-align":"right"},attrs:{id:"mosparo-box"},on:{click:t.onCheckForm}})]),t.successMessage?o("p",{staticClass:"success-message"},[t._v(" "+t._s(t.successMessage)+" ")]):t._e()])]),t._m(0)])])])])},a=[function(){var t=this,o=t._self._c;return o("div",{staticClass:"col-md-6 signup-image mt-5",staticStyle:{"text-align":"center"}},[o("figure",[o("img",{attrs:{src:e("0274"),alt:"sign up image"}})])])}],i=(e("14d9"),e("88a7"),e("271a"),e("5494"),e("3d20")),n=e.n(i),r=e("bc3a"),l=e.n(r);const c="https://xdata.ur.gov.iq/api/";var d={name:"readQR",title:"قراءة QR",data(){return{newUrl:null,urlParam:"",honeypotField:"",qrCheck:!1,mosparoConfig:{uuid:"4f11a243-b40c-4b05-9c2d-db265f168483",publicKey:"R-xfzljwupelVctXGlFVhOcpaZ1N5ZeSfiqE8MS6Y-8",host:"https://check.ur.gov.iq",htmlId:"mosparo-box",options:{language:"ar_AR",name:"mosparoxdata",loadCssResource:!0,onValidateFormInvisible:this.handleValidationSuccess}},mosparoInstance:null,submitToken:null,successMessage:"",validationToken:null,showBtnQR:!1,hideErr:[]}},methods:{loadMosparo(){const t=document.createElement("script");t.src=this.mosparoConfig.host+"/build/mosparo-frontend.js",t.defer=!0,t.onload=()=>{this.mosparoInstance=new window.mosparo(this.mosparoConfig.htmlId,this.mosparoConfig.host,this.mosparoConfig.uuid,this.mosparoConfig.publicKey,this.mosparoConfig.options),setTimeout(()=>{this.getSubmitToken()},1e3)},t.onerror=()=>{console.error("Failed to load Mosparo script")},document.head.appendChild(t)},getSubmitToken(){const t=document.querySelector(".mosparo__submit-token");t?this.submitToken=t.value:console.error("Submit token element not found.")},onCheckForm(){let t=this.$loading.show({loader:"dots",transition:"fade",color:"#DC3545"});setTimeout(()=>{this.getValidationToken(),this.validationToken&&setTimeout(()=>{t.hide(),this.checkMosparo()},500)},500)},getValidationToken(){const t=document.querySelector(".mosparo__validation-token");t?(this.validationToken=t.value,console.log("Validation Token:",this.validationToken)):console.error("Validation token element not found.")},checkMosparo(){let t=this.$loading.show({loader:"dots",transition:"fade",color:"#DC3545"});l.a.post(c+"plat/mosparo",{submit_token:this.submitToken,validation_token:this.validationToken,formdata:{url:this.urlParam}}).then(o=>{if(200==o.status){t.hide(),this.newUrl=o.data.pdf_base64;var e="data:application/pdf;base64,"+this.newUrl;fetch(e).then(t=>t.blob()).then(t=>{const o=URL.createObjectURL(t);var e=document.createElement("a");e.href=o,e.target="_blank",e.click(),window.URL.revokeObjectURL(t)})}else(201==o.status||422==o.status)&&(t.hide(),n.a.fire({icon:"info",title:o.data.message,showConfirmButton:!0}))}).catch(o=>{t.hide(),this.hideErr.push(o)})},handleValidationSuccess(){this.successMessage="بياناتك صالحة. يمكنك تقديم النموذج.",this.getValidationToken()}},mounted(){this.urlParam=this.$route.query.url,this.loadMosparo()}},u=d,h=(e("1cfd"),e("0c7c")),m=Object(h["a"])(u,s,a,!1,null,null,null);o["default"]=m.exports}}]);